---
title: "[파이썬-logging] 08. 로깅 래퍼 클래스 만들어보기" # 제목 (필수)
excerpt: "공부한 것을 토대로 로깅을 이용해보자." # 서브 타이틀이자 meta description (필수)
date: 2025-11-04 01:05:00 +0900      # 작성일 (필수)
lastmod: 2025-11-04 01:05:00 +0900   # 최종 수정일 (필수)
last_modified_at: 2025-11-04 01:05:00 +0900   # 최종 수정일 (필수)
categories: Python      # 다수 카테고리에 포함 가능 (필수)
tags: python 파이썬 로깅 로그 logging log 커스텀 래퍼 클래스 class wrapper custom                    # 태그 복수개 가능 (필수)
classes: wide        # wide : 넓은 레이아웃 / 빈칸 : 기본 //// wide 시에는 sticky toc 불가
toc: true        # 목차 표시 여부
toc_label:       # toc 제목
toc_sticky: true # 이동하는 목차 표시 여부 (toc:true 필요) // wide 시에는 sticky toc 불가
header: 
  image:         # 헤더 이미지 (asset내 혹은 url)
  teaser:        # 티저 이미지??
  overlay_image: /assets/images/banners/banner.gif            # 헤더 이미지 (제목과 겹치게)
  # overlay_color: '#333'            # 헤더 배경색 (제목과 겹치게) #333 : 짙은 회색 (필수)
  video:
    id:                      # 영상 ID (URL 뒷부분)
    provider:                # youtube, vimeo 등
sitemap :                    # 구글 크롤링
  changefreq : daily         # 구글 크롤링
  priority : 1.0             # 구글 크롤링
author: # 주인 외 작성자 표기 필요시
---
<!--postNo: 20251104_008-->



## 직접 만든 로깅 래퍼 클래스  

```python
import logging
from logging.handlers import TimedRotatingFileHandler
from typing import Literal
import time
import os

DEBUG_MODE = 0
LOG_LEVEL_TYPE = Literal["DEBUG", "INFO", "WARNING", "ERROR"]
LOG_WHEN = Literal["S", "M", "H", "D", "midnight", "W{0}", "W{1}", "W{2}", "W{3}", "W{4}", "W{5}", "W{6}"]

# logger
class DefaultLogger():
    
    def __init__(self,
                 logger_log_level:LOG_LEVEL_TYPE = "INFO",
                 file_log_level:LOG_LEVEL_TYPE = "WARNING",
                 console_log_level:LOG_LEVEL_TYPE = "DEBUG",
                 log_dir:str = "logs",
                 log_format:str = "[%(asctime)s] %(levelname)s (%(filename)s) [line : %(lineno)d] - %(message)s",
                 when:LOG_WHEN = "D",
                 interval:str|int = 1,
                 retention_period_day:str|int = 90
                 ):
        self.logger = None
        # log level
        self.logger_log_level = self._log_level_convert(logger_log_level)
        self.file_log_level = self._log_level_convert(file_log_level)
        self.console_log_level = self._log_level_convert(console_log_level)
        # log dir and format
        self.log_dir = log_dir
        self.log_format = log_format
        # file rotating setting
        self.when = when
        self.interval = int(interval)
        self.retention_period_day = int(retention_period_day)
    
    def _log_level_convert(self, log_level:LOG_LEVEL_TYPE):
        return logging._nameToLevel[log_level]
    
    def check_log_dir(self, log_dir):
        if not os.path.exists(log_dir):
            os.makedirs(log_dir)
    
    def get_logger(self, logger_name:str, file_name:str, encoding:str="utf-8"):
        
        self.logger = logging.getLogger(logger_name)
        self.logger.setLevel(self.logger_log_level)
        self.logger.propagate = False
        
        # remove existing handlers
        if self.logger.hasHandlers():
            self.logger.handlers.clear()
        
        # setting log_dir path and retention period
        filename = os.path.join(self.log_dir, file_name)
        backup_count = 90
        if self.when == "D":
            backup_count = int(self.retention_period_day / self.interval)
        elif self.when == "H":
            backup_count = int(self.retention_period_day * 24 / self.interval)
        elif self.when == "M":
            backup_count = int(self.retention_period_day * 24 * 60 / self.interval)
        elif self.when == "S":
            backup_count = int(self.retention_period_day * 24 * 60 * 60 / self.interval)
        
        # check log dir
        self.check_log_dir(self.log_dir)
        
        # handler
        file_handler = TimedRotatingFileHandler(filename=filename,
                                                backupCount=backup_count,
                                                encoding=encoding,
                                                when=self.when,
                                                interval=self.interval)
        console_handler = logging.StreamHandler()
        file_handler.setLevel(self.file_log_level)
        console_handler.setLevel(self.console_log_level)
        
        # formatter
        formatter = logging.Formatter(fmt=self.log_format)
        file_handler.setFormatter(formatter)
        console_handler.setFormatter(formatter)
        
        # return logger
        self.logger.addHandler(file_handler)
        self.logger.addHandler(console_handler)
        
        return self.logger

# test code
if DEBUG_MODE==0:
    logger_name = "default_logger"
    file_name = "default_log"
    config = DefaultLogger()
    logger = config.get_logger(logger_name, file_name)
elif DEBUG_MODE==1:
    logger_name = "test_logger"
    file_name = "test_log"
    config = DefaultLogger(when="S", interval=3)
    logger = config.get_logger(logger_name, file_name)
    for i in range(20):
        logger.error(f"test log : {i}")
        time.sleep(1)

"""
usage
# usage(1) : 기본 로깅 설정으로 간편하게
from log_manager import logger
logger.info("abc")

# usage(2) : 로깅 설정 커스텀
config = DefaultLogger(설정 커스텀...)
logger = config.get_logger(logger_name, file_name)
logger.info("abc")
"""
```

## Reference  

[https://docs.python.org/3/library/logging.html](https://docs.python.org/3/library/logging.html)  
[https://docs.python.org/ko/3/howto/logging.html](https://docs.python.org/ko/3/howto/logging.html)  